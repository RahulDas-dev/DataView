import{u as e,a as t,c as a,g as r,P as i,b as s,d as n,j as o}from"./index-Mia99oiE.js";import{r as l}from"./ui-components-BNBUoXTo.js";import"./react-vendor-Bf-MSPTJ.js";import"./danfojs-bY-Wo8g9.js";import"./plotly-Dxrw3P6A.js";const m=({columnName:m,bandwidth:d="silverman",binCount:c=30})=>{const u=l.useRef(null),{isDark:x}=e(),{dataFrame:h}=t();return l.useEffect((()=>{if(!u.current||!h||h.isEmpty||0==h.shape[0]||!m)return;const e=u.current;e.innerHTML="";const t=h[m].dropNa(),o=s(x),l=t.values;if(0===l.length)return void(e.innerHTML='<div class="p-4 text-zinc-500 dark:text-zinc-400 font-mono text-sm">No valid numerical data to display</div>');const p=t.min(),f=t.max(),v=(f-p)/Math.min(Math.ceil(Math.sqrt(t.values.length)),c),y={x:l,type:"histogram",name:"Histogram",opacity:.7,autobinx:!1,xbins:{start:p-v/2,end:f+v/2,size:v},marker:{color:o.histogramColor},hovertemplate:"Range: %{x}<br>Count: %{y}<extra></extra>"},g=a(l,d,p,f,!1,c),j={x:g.x,y:g.y,type:"scatter",mode:"lines",name:"Density",line:{color:o.kdeColor,width:2},hovertemplate:"Value: %{x}<br>Density: %{y}<extra></extra>"},w={...r(x,e.offsetWidth,m,"Frequency"),barmode:"overlay",bargap:.05},b=n(`histogram_${m}`),z=()=>{e&&i.relayout(e,{width:e.offsetWidth})},N=setTimeout((()=>{try{e&&(i.newPlot(e,[y,j],w,b),window.addEventListener("resize",z))}catch(t){e&&(e.innerHTML='<div class="p-4 text-zinc-500 dark:text-zinc-400 font-mono text-sm">Error rendering histogram plot</div>')}}),50);return()=>{if(clearTimeout(N),window.removeEventListener("resize",z),e)try{i.purge(e)}catch(t){}}}),[h,m,d,c,x]),o.jsx("div",{className:"w-full",children:o.jsx("div",{ref:u,className:"w-full h-[400px] min-h-[200px]","data-testid":"histogram-plot",children:o.jsx("div",{className:"h-full w-full flex items-center justify-center",children:o.jsx("div",{className:"animate-pulse text-zinc-400 font-mono text-sm",children:"Loading visualization..."})})})})};export{m as default};
