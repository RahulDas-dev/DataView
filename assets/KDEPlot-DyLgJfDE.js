import{u as e,a as t,c as i,g as s,P as r,b as n,d as o,j as a}from"./index-B6jgkni2.js";import{r as l}from"./ui-components-BNBUoXTo.js";import"./react-vendor-Bf-MSPTJ.js";import"./danfojs-bY-Wo8g9.js";import"./plotly-Dxrw3P6A.js";const d=({columnName:d,bandwidth:c="silverman",binCount:m=30})=>{const f=l.useRef(null),{isDark:u}=e(),{dataFrame:x}=t();return l.useEffect((()=>{if(!f.current||!x||x.isEmpty||0==x.shape[0]||!d)return;const e=f.current;e.innerHTML="";const t=n(u),a=x[d].dropNa(),l=a.values;if(0===l.length)return void(e.innerHTML='<div class="p-4 text-zinc-500 dark:text-zinc-400 font-mono text-sm">No valid numerical data to display</div>');const p=a.min(),h=a.max(),y=i(l,c,p,h,!0,m),v={x:y.x,y:y.y,type:"scatter",mode:"lines",name:"Density",line:{color:t.kdeColor,width:2.5},fill:"tozeroy",fillcolor:u?"rgba(161, 161, 170, 0.2)":"rgba(113, 113, 122, 0.2)",hovertemplate:"Value: %{x}<br>Density: %{y}<extra></extra>"},w={x:l,y:Array(l.length).fill(0),mode:"markers",type:"scatter",marker:{symbol:"line-ns",color:t.kdeColor,size:10,opacity:.5,line:{width:1}},hoverinfo:"x",showlegend:!1},j={...s(u,e.offsetWidth,d,"Density"),yaxis:{...s(u,e.offsetWidth).yaxis,title:{text:"Density",font:{family:"monospace",size:12}},rangemode:"tozero"},showlegend:!1,hovermode:"closest"},z=o(`kde_${d}`),g=()=>{e&&r.relayout(e,{width:e.offsetWidth})},k=setTimeout((()=>{try{e&&(r.newPlot(e,[v,w],j,z),window.addEventListener("resize",g))}catch(t){e&&(e.innerHTML='<div class="p-4 text-zinc-500 dark:text-zinc-400 font-mono text-sm">Error rendering KDE plot</div>')}}),50);return()=>{if(clearTimeout(k),window.removeEventListener("resize",g),e)try{r.purge(e)}catch(t){}}}),[x,d,c,m,u]),a.jsx("div",{className:"w-full",children:a.jsx("div",{ref:f,className:"w-full h-[400px] min-h-[200px]","data-testid":"kde-plot",children:a.jsx("div",{className:"h-full w-full flex items-center justify-center",children:a.jsx("div",{className:"animate-pulse text-zinc-400 font-mono text-sm",children:"Loading visualization..."})})})})};export{d as default};
